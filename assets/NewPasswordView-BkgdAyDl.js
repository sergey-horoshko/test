import{b as k,d as h,j as P,k as V,v as I,l as _,r as m,c as p,e as u,g as o,t as i,f as r,w,m as F,n as b,p as C,q as S,u as x}from"./index-CDtww2dw.js";import{u as z}from"./index-Bseo6DBn.js";import{a as B,t as N}from"./request-DpTcvMri.js";import{r as $,e as j,m as E}from"./i18n-validators-Dl5lyeYw.js";import{c as L}from"./reset-vX_iYAUc.js";const M=h({setup(){const e=P(!0),s=V({email:"",password:""}),{t:l}=I(),v=x(),g=_(()=>({email:{required:$,email:j},password:{required:$,minLength:E(6)}})),d=z(g,s);return{typePassword:e,form:s,v:d,validate:({prop:n})=>{const t=d.value.$errors.find(c=>c.$property===n);return t&&t.$message},onSubmit:async()=>{if(d.value.$touch(),!s.pending&&await d.value.$validate()){s.pending=!0;try{const n={email:s.email.toLowerCase(),password:s.password,password_confirmation:s.password,token:v.currentRoute.value.params.token},t=await L(n);t!=null&&t.message&&B({title:l("successForm.success"),body:l("successForm.resetPassword")})}catch{N({title:l("errorForm.error"),body:l("errorForm.resetPassword")})}finally{s.pending=!1}}}}}}),T={class:"rounded-lg p-5 md:bg-white md:p-12 md:shadow-xl dark:md:bg-dark-content"},q={class:"flex w-full items-center justify-between gap-3"},R={class:"text-2xl font-bold"},U={class:"mt-2 leading-5"},D={class:"flex flex-col"},A={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},G={key:0,class:"invalid mt-1 text-red-400"},H={class:"relative mt-6 flex flex-col"},J={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},K={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},O={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},Q={key:0,class:"invalid mt-1 text-red-400"};function W(e,s,l,v,g,d){const y=m("router-link"),f=m("InputIcon"),n=m("InputText"),t=m("IconField"),c=m("Button");return p(),u("div",T,[o("div",q,[o("span",R,i(e.$t("newPassword.title")),1),r(y,{class:"font-semibold text-blue-600 dark:text-blue-500",to:"/auth"},{default:w(()=>[F(i(e.$t("newPassword.auth")),1)]),_:1})]),o("div",U,i(e.$t("newPassword.description")),1),o("form",{onSubmit:s[5]||(s[5]=S((...a)=>e.onSubmit&&e.onSubmit(...a),["prevent"])),autocomplete:"off",class:"mt-8"},[o("div",D,[o("label",A,i(e.$t("form.labelEmail")),1),r(t,{iconPosition:"left"},{default:w(()=>[r(f,{class:"pi pi-envelope"}),r(n,{modelValue:e.form.email,"onUpdate:modelValue":s[0]||(s[0]=a=>e.form.email=a),modelModifiers:{trim:!0},onFocus:s[1]||(s[1]=a=>e.v.$reset()),invalid:!!e.validate({prop:"email"}),type:"text",size:"large"},null,8,["modelValue","invalid"])]),_:1}),e.validate({prop:"email"})?(p(),u("div",G,i(e.validate({prop:"email"})),1)):b("",!0)]),o("div",H,[o("label",J,i(e.$t("form.labelPassword")),1),r(t,{iconPosition:"left"},{default:w(()=>[r(f,{class:"pi pi-lock"}),r(n,{modelValue:e.form.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.form.password=a),modelModifiers:{trim:!0},onFocus:s[3]||(s[3]=a=>e.v.$reset()),invalid:!!e.validate({prop:"password"}),type:"text",size:"large"},null,8,["modelValue","invalid"])]),_:1}),o("button",{class:"toggle p-2",type:"button",onClick:s[4]||(s[4]=a=>e.typePassword=!e.typePassword)},[e.typePassword?(p(),u("i",K)):(p(),u("i",O))]),e.validate({prop:"password"})?(p(),u("div",Q,i(e.validate({prop:"password"})),1)):b("",!0)]),r(c,{class:C([{"-loading":e.form.pending},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pending,label:e.form.pending?"":e.$t("form.save"),rounded:"",type:"submit"},null,8,["class","loading","label"])],32)])}const te=k(M,[["render",W]]);export{te as default};
