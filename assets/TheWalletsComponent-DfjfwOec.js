import{u as F}from"./me-B7TNIDym.js";import{s as B,a as T}from"./request-D-Pgtuu-.js";import{b as U,d as j,k as D,j as h,v as N,l as I,o as W,E as L,r as g,c as r,e as u,g as o,t as d,f as l,w,n as c,F as M,p as P,C as R,D as q}from"./index-D0RtDb04.js";import{r as A,m as G}from"./i18n-validators-DXFbBJ_0.js";import{u as H}from"./index-Cs4T_qhb.js";function J(e){return B({url:"/wallets",method:"post",data:e})}const K=j({setup(){const e=D({password:null,wallets:[{network:"TRC20",address:null},{network:"BEP20",address:null},{network:"ERC20",address:null}],pending:null,pendingModal:null}),s=h(!0),v=h(!1),$=h(!0),k=h(!1),C=F(),{user:i}=C,{t:m}=N(),p=I(()=>!e.wallets.some(a=>{var n;return a.address&&((n=a.address)==null?void 0:n.length)>15})),b=I(()=>({password:{required:A,minLength:G(6)}})),f=H(b,e),t=async()=>{if(f.value.$touch(),!e.pendingModal&&await f.value.$validate()){e.pendingModal=!0;try{setTimeout(()=>{e.pendingModal=!1,k.value=!1,s.value=!0,v.value=!0},1500)}catch(a){console.log(a)}finally{}}},x=async()=>{if(e.pending)return;e.pending=!0;const a={wallets:e.wallets};try{const{wallets:n}=await J(a);i.wallets.forEach(y=>{n.forEach(V=>{y.network===V.network&&(y.address=V.address)})}),i.wallets=n,s.value=!1,T({title:m("successForm.success"),body:m("successForm.changePassword")})}catch(n){console.log(n)}finally{e.pending=!1}},S=()=>{s.value=!1,v.value=!1},E=({prop:a})=>{const n=f.value.$errors.find(y=>y.$property===a);return n&&n.$message},z=()=>{s.value=!i.wallets.some(a=>!!a.address)};return W(()=>{e.wallets.forEach(a=>{i.wallets.forEach(n=>{a.network===n.network&&(a.address=n.address)})}),z()}),{form:e,user:i,typePassword:$,validate:E,onSubmit:t,onChange:x,changeVisibility:S,v:f,show:k,edit:s,isValid:p,showCancel:v}},components:{Sheet:L}}),O=e=>(R("data-v-c5c56fe8"),e=e(),q(),e),Q={class:"mt-8"},X={class:"mt-6 flex flex-col"},Y={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},Z={class:"mt-1 text-right"},_={class:"mt-6 flex flex-col"},ee={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},se={key:0,class:"mt-1 text-right"},te={class:"relative mt-6 flex flex-col"},oe={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},le={class:"mt-1 text-right"},ae={class:"p-5 pt-4 md:p-8"},ne=O(()=>o("i",{style:{"font-size":"1rem"},class:"pi pi-times text-gray-500 dark:text-gray-300"},null,-1)),de=[ne],ie={class:"mt-2"},re={class:"text-2xl font-bold"},ue={class:"mt-1 leading-4"},me={class:"relative mt-6 flex flex-col"},pe={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},fe={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},ce={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},ge={key:0,class:"invalid mt-1 text-red-400"};function we(e,s,v,$,k,C){const i=g("InputIcon"),m=g("InputText"),p=g("IconField"),b=g("Button"),f=g("Sheet");return r(),u(M,null,[o("div",Q,[o("div",X,[o("label",Y,d(e.$t("form.trc20")),1),l(p,{iconPosition:"left"},{default:w(()=>[l(i,{class:"pi pi-wallet"}),l(m,{modelValue:e.form.wallets[0].address,"onUpdate:modelValue":s[0]||(s[0]=t=>e.form.wallets[0].address=t),modelModifiers:{trim:!0},disabled:!e.edit,type:"text",size:"large"},null,8,["modelValue","disabled"])]),_:1})]),o("div",Z,[e.edit?c("",!0):(r(),u("div",{key:0,onClick:s[1]||(s[1]=t=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},d(e.$t("form.change")),1))]),o("div",_,[o("label",ee,d(e.$t("form.bep20")),1),l(p,{iconPosition:"left"},{default:w(()=>[l(i,{class:"pi pi-wallet"}),l(m,{modelValue:e.form.wallets[1].address,"onUpdate:modelValue":s[2]||(s[2]=t=>e.form.wallets[1].address=t),modelModifiers:{trim:!0},disabled:!e.edit,type:"text",size:"large"},null,8,["modelValue","disabled"])]),_:1})]),e.edit?c("",!0):(r(),u("div",se,[o("div",{onClick:s[3]||(s[3]=t=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},d(e.$t("form.change")),1)])),o("div",te,[o("label",oe,d(e.$t("form.erc20")),1),l(p,{iconPosition:"left"},{default:w(()=>[l(i,{class:"pi pi-wallet"}),l(m,{modelValue:e.form.wallets[2].address,"onUpdate:modelValue":s[4]||(s[4]=t=>e.form.wallets[2].address=t),modelModifiers:{trim:!0},disabled:!e.edit,type:"text",size:"large"},null,8,["modelValue","disabled"])]),_:1})]),o("div",le,[e.edit?c("",!0):(r(),u("div",{key:0,onClick:s[5]||(s[5]=t=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},d(e.$t("form.change")),1))]),e.edit?(r(),u(M,{key:1},[l(b,{onClick:e.onChange,disabled:e.isValid,class:P([{"-loading":e.form.pending},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pending,label:e.form.pending?"":e.$t("form.save"),rounded:""},null,8,["onClick","disabled","class","loading","label"]),e.showCancel?(r(),u("button",{key:0,onClick:s[6]||(s[6]=(...t)=>e.changeVisibility&&e.changeVisibility(...t)),class:"mx-auto mt-6 block cursor-pointer font-semibold text-blue-600 dark:text-blue-500"},d(e.$t("form.cancel")),1)):c("",!0)],64)):c("",!0)]),l(f,{visible:e.show,"onUpdate:visible":s[12]||(s[12]=t=>e.show=t)},{default:w(()=>[o("div",ae,[o("div",{onClick:s[7]||(s[7]=t=>e.show=!1),class:"flex cursor-pointer justify-end"},de),o("div",ie,[o("span",re,d(e.$t("form.changeWallet")),1)]),o("div",ue,d(e.$t("form.changePasswordDescription")),1),o("div",me,[o("label",pe,d(e.$t("form.currentPassword")),1),l(p,{iconPosition:"left"},{default:w(()=>[l(i,{class:"pi pi-lock"}),l(m,{modelValue:e.form.password,"onUpdate:modelValue":s[8]||(s[8]=t=>e.form.password=t),modelModifiers:{trim:!0},onFocus:s[9]||(s[9]=t=>e.v.$reset()),invalid:!!e.validate({prop:"password"}),type:e.typePassword?"password":"text",size:"large"},null,8,["modelValue","invalid","type"])]),_:1}),o("button",{class:"toggle p-2",type:"button",onClick:s[10]||(s[10]=t=>e.typePassword=!e.typePassword)},[e.typePassword?(r(),u("i",fe)):(r(),u("i",ce))]),e.validate({prop:"password"})?(r(),u("div",ge,d(e.validate({prop:"password"})),1)):c("",!0)]),l(b,{onClick:e.onSubmit,class:P([{"-loading":e.form.pendingModal},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pendingModal,label:e.form.pendingModal?"":e.$t("form.save"),rounded:""},null,8,["onClick","class","loading","label"]),o("div",{onClick:s[11]||(s[11]=t=>e.show=!1),class:"mt-6 cursor-pointer text-center font-semibold text-blue-600 dark:text-blue-500"},d(e.$t("form.cancel")),1)])]),_:1},8,["visible"])],64)}const $e=U(K,[["render",we],["__scopeId","data-v-c5c56fe8"]]);export{$e as default};
