import{u as I}from"./me-B7TNIDym.js";import{a as h}from"./request-D-Pgtuu-.js";import{b as S,d as z,k as F,j as v,v as B,l as M,E as T,r as f,c as d,e as p,g as t,t as r,f as o,w as m,n as P,p as U,F as _,C as D,D as L}from"./index-D0RtDb04.js";import{r as x,m as C,s as j}from"./i18n-validators-DXFbBJ_0.js";import{u as A}from"./index-Cs4T_qhb.js";const E=z({setup(){const e=F({password:null,currentPassword:null,pending:null}),s=v(!0),y=v(!0),c=v(!1),g=I(),{user:b}=g,{t:i}=B(),n=M(()=>({password:{required:x,minLength:C(6)},currentPassword:{required:x,minLength:C(6),sameAs:j(e.password)}})),a=A(n,e);return{form:e,user:b,typePassword:s,typeCurrentPassword:y,copy:u=>{navigator.clipboard.writeText(u).then(()=>{h({title:i("successForm.success"),body:i("successForm.copy")})})},validate:({prop:u})=>{const k=a.value.$errors.find(V=>V.$property===u);return k&&k.$message},onSubmit:async()=>{if(a.value.$touch(),!e.pending&&await a.value.$validate()){e.pending=!0;try{setTimeout(()=>{h({title:i("successForm.success"),body:i("successForm.changePassword")}),e.pending=!1,c.value=!1},1500)}catch(u){console.log(u)}finally{}}},v:a,show:c}},components:{Sheet:T}}),N=e=>(D("data-v-68224395"),e=e(),L(),e),q={class:"mt-8"},G={class:"flex flex-col"},H={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},J={class:"mt-6 flex flex-col"},K={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},O={class:"mt-1 text-right"},Q={class:"mt-6 flex flex-col"},R={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},W={class:"mt-1 text-right"},X={class:"relative mt-6 flex flex-col"},Y={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},Z={class:"mt-1 text-right"},ee={class:"p-5 pt-4 md:p-8"},se=N(()=>t("i",{style:{"font-size":"1rem"},class:"pi pi-times text-gray-500 dark:text-gray-300"},null,-1)),te=[se],oe={class:"mt-2"},le={class:"text-2xl font-bold"},re={class:"mt-1 leading-4"},ie={class:"relative mt-6 flex flex-col"},ae={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},ne={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},de={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},pe={key:0,class:"invalid mt-1 text-red-400"},me={class:"relative mt-6 flex flex-col"},ue={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},fe={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},ce={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},ve={key:0,class:"invalid mt-1 text-red-400"};function ye(e,s,y,c,g,b){const i=f("InputIcon"),n=f("InputText"),a=f("IconField"),w=f("Button"),$=f("Sheet");return d(),p(_,null,[t("div",q,[t("div",G,[t("label",H,r(e.$t("form.labelEmail")),1),o(a,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-envelope"}),o(n,{modelValue:e.user.email,"onUpdate:modelValue":s[0]||(s[0]=l=>e.user.email=l),modelModifiers:{trim:!0},disabled:"",type:"text",size:"large"},null,8,["modelValue"])]),_:1})]),t("div",J,[t("label",K,r(e.$t("form.referralPromocode")),1),o(a,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-verified"}),o(n,{modelValue:e.user.promo,"onUpdate:modelValue":s[1]||(s[1]=l=>e.user.promo=l),modelModifiers:{trim:!0},disabled:"",type:"text",size:"large"},null,8,["modelValue"])]),_:1})]),t("div",O,[t("div",{onClick:s[2]||(s[2]=l=>e.copy(e.user.promo)),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},r(e.$t("form.copy")),1)]),t("div",Q,[t("label",R,r(e.$t("form.referralLink")),1),o(a,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-verified"}),o(n,{value:`https://cab.opes.team/?ref=${e.user.promo}`,disabled:"",type:"text",size:"large"},null,8,["value"])]),_:1})]),t("div",W,[t("div",{onClick:s[3]||(s[3]=l=>e.copy(`https://cab.opes.team/?ref=${e.user.promo}`)),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},r(e.$t("form.copy")),1)]),t("div",X,[t("label",Y,r(e.$t("form.labelPassword")),1),o(a,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-lock"}),o(n,{value:123456,disabled:"",type:"password",size:"large"})]),_:1})]),t("div",Z,[t("div",{onClick:s[4]||(s[4]=l=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},r(e.$t("form.change")),1)])]),o($,{visible:e.show,"onUpdate:visible":s[13]||(s[13]=l=>e.show=l)},{default:m(()=>[t("div",ee,[t("div",{onClick:s[5]||(s[5]=l=>e.show=!1),class:"flex cursor-pointer justify-end"},te),t("div",oe,[t("span",le,r(e.$t("form.changePassword")),1)]),t("div",re,r(e.$t("form.changePasswordDescription")),1),t("div",ie,[t("label",ae,r(e.$t("form.currentPassword")),1),o(a,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-lock"}),o(n,{modelValue:e.form.password,"onUpdate:modelValue":s[6]||(s[6]=l=>e.form.password=l),modelModifiers:{trim:!0},onFocus:s[7]||(s[7]=l=>e.v.$reset()),invalid:!!e.validate({prop:"password"}),type:e.typePassword?"password":"text",size:"large"},null,8,["modelValue","invalid","type"])]),_:1}),t("button",{class:"toggle p-2",type:"button",onClick:s[8]||(s[8]=l=>e.typePassword=!e.typePassword)},[e.typePassword?(d(),p("i",ne)):(d(),p("i",de))]),e.validate({prop:"password"})?(d(),p("div",pe,r(e.validate({prop:"password"})),1)):P("",!0)]),t("div",me,[t("label",ue,r(e.$t("newPassword.title")),1),o(a,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-lock"}),o(n,{modelValue:e.form.currentPassword,"onUpdate:modelValue":s[9]||(s[9]=l=>e.form.currentPassword=l),modelModifiers:{trim:!0},onFocus:s[10]||(s[10]=l=>e.v.$reset()),invalid:!!e.validate({prop:"currentPassword"}),type:e.typeCurrentPassword?"password":"text",size:"large"},null,8,["modelValue","invalid","type"])]),_:1}),t("button",{class:"toggle p-2",type:"button",onClick:s[11]||(s[11]=l=>e.typeCurrentPassword=!e.typeCurrentPassword)},[e.typeCurrentPassword?(d(),p("i",fe)):(d(),p("i",ce))]),e.validate({prop:"currentPassword"})?(d(),p("div",ve,r(e.validate({prop:"currentPassword"})),1)):P("",!0)]),o(w,{onClick:e.onSubmit,class:U([{"-loading":e.form.pending},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pending,label:e.form.pending?"":e.$t("form.save"),rounded:""},null,8,["onClick","class","loading","label"]),t("div",{onClick:s[12]||(s[12]=l=>e.show=!1),class:"mt-6 cursor-pointer text-center font-semibold text-blue-600 dark:text-blue-500"},r(e.$t("form.cancel")),1)])]),_:1},8,["visible"])],64)}const he=S(E,[["render",ye],["__scopeId","data-v-68224395"]]);export{he as default};
