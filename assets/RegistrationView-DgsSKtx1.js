import{b as h,d as V,j as P,k as x,l as S,r as d,c as m,e as p,g as s,t as a,f as l,w as u,m as b,n as $,p as C,q as I,u as _,s as z}from"./index-CSIFBmTv.js";import{u as B}from"./index-DnsCbtSd.js";import{u as F}from"./me-CmPmFszh.js";import{r as k,e as L,m as M}from"./i18n-validators-CZN2Nsaq.js";import{s as R,t as E}from"./request-nPLIoLLS.js";function N(e){return R({url:"/register/",method:"post",data:e})}const T=V({setup(){const e=P(!0),t=x({promocode:null,email:"",password:null,pending:null}),g=_(),v=F(),{getProfile:w}=v,y=S(()=>({email:{required:k,email:L},password:{required:k,minLength:M(6)}})),i=B(y,t);return{typePassword:e,form:t,v:i,validate:({prop:n})=>{const r=i.value.$errors.find(o=>o.$property===n);return r&&r.$message},onSubmit:async()=>{if(i.value.$touch(),!t.pending&&await i.value.$validate()){t.pending=!0;try{const n={email:t.email.toLowerCase(),login:t.email.toLowerCase(),name:"123123123",last_name:"123123",password:t.password,confirmPassword:t.password,referral_promo:t.promocode,terms:!0,isAcceptRules:!1},r=await N(n);console.log(r),r!=null&&r.access_token?(z(r.access_token),await w(),await g.push("/")):E({title:"Ошибка",body:"Произошла ошибка, свяжитесь с администратором"})}catch(n){console.log(n)}finally{t.pending=!1}}}}}}),U={class:"rounded-lg p-5 md:bg-white md:p-12 md:shadow-xl dark:md:bg-dark-content"},j={class:"flex w-full items-center justify-between gap-3"},q={class:"text-2xl font-bold"},A={class:"mt-1"},D={class:"flex flex-col"},G={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},H={class:"mt-6 flex flex-col"},J={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},K={key:0,class:"invalid mt-1 text-red-400"},O={class:"relative mt-6 flex flex-col"},Q={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},W={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},X={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},Y={key:0,class:"invalid mt-1 text-red-400"},Z={class:"mt-6 text-xs"};function ee(e,t,g,v,w,y){const i=d("router-link"),f=d("InputIcon"),c=d("InputText"),n=d("IconField"),r=d("Button");return m(),p("div",U,[s("div",j,[s("span",q,a(e.$t("registration.title")),1),l(i,{class:"font-semibold text-blue-600 dark:text-blue-500",to:"/auth"},{default:u(()=>[b(a(e.$t("registration.auth")),1)]),_:1})]),s("div",A,a(e.$t("registration.description")),1),s("form",{onSubmit:t[7]||(t[7]=I((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"])),class:"mt-8"},[s("div",D,[s("label",G,a(e.$t("form.labelPromocode")),1),l(n,{iconPosition:"left"},{default:u(()=>[l(f,{class:"pi pi-check-circle"}),l(c,{modelValue:e.form.promocode,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.promocode=o),modelModifiers:{trim:!0},onFocus:t[1]||(t[1]=o=>e.v.$reset()),type:"text",size:"large"},null,8,["modelValue"])]),_:1})]),s("div",H,[s("label",J,a(e.$t("form.labelEmail")),1),l(n,{iconPosition:"left"},{default:u(()=>[l(f,{class:"pi pi-envelope"}),l(c,{modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.email=o),modelModifiers:{trim:!0},onFocus:t[3]||(t[3]=o=>e.v.$reset()),invalid:!!e.validate({prop:"email"}),type:"text",size:"large"},null,8,["modelValue","invalid"])]),_:1}),e.validate({prop:"email"})?(m(),p("div",K,a(e.validate({prop:"email"})),1)):$("",!0)]),s("div",O,[s("label",Q,a(e.$t("form.labelPassword")),1),l(n,{iconPosition:"left"},{default:u(()=>[l(f,{class:"pi pi-lock"}),l(c,{modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.password=o),modelModifiers:{trim:!0},onFocus:t[5]||(t[5]=o=>e.v.$reset()),invalid:!!e.validate({prop:"password"}),type:e.typePassword?"password":"text",size:"large"},null,8,["modelValue","invalid","type"])]),_:1}),s("button",{class:"toggle p-2",type:"button",onClick:t[6]||(t[6]=o=>e.typePassword=!e.typePassword)},[e.typePassword?(m(),p("i",W)):(m(),p("i",X))]),e.validate({prop:"password"})?(m(),p("div",Y,a(e.validate({prop:"password"})),1)):$("",!0)]),s("div",Z,[s("span",null,a(e.$t("registration.rulesStart")),1),l(i,{class:"mx-1 font-medium text-blue-600 dark:text-blue-500",to:"/docs"},{default:u(()=>[b(a(e.$t("registration.rulesLink")),1)]),_:1}),s("span",null,a(e.$t("registration.rulesEnd")),1)]),l(r,{class:C([{"-loading":e.form.pending},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pending,label:e.form.pending?"":e.$t("form.buttonSignUp"),rounded:"",type:"submit"},null,8,["class","loading","label"])],32)])}const re=h(T,[["render",ee]]);export{re as default};
