import{u as I}from"./me-BFpF1b53.js";import{a as $}from"./request-DpTcvMri.js";import{b as z,d as F,k as B,j as y,y as T,v as M,l as U,E as A,r as f,c as d,e as p,g as t,t as l,f as o,w as m,n as P,p as x,F as L,A as _,B as j}from"./index-CDtww2dw.js";import{r as C,m as S,s as D}from"./i18n-validators-Dl5lyeYw.js";import{u as E}from"./index-Bseo6DBn.js";const N=F({setup(){const e=B({password:null,currentPassword:null,pending:null}),s=y(!0),g=y(!0),v=y(!1),b=I(),w=T(),{user:i}=b,{t:a}=M(),n=U(()=>({password:{required:C,minLength:S(6)},currentPassword:{required:C,minLength:S(6),sameAs:D(e.password)}})),u=E(n,e);return{form:e,user:i,typePassword:s,typeCurrentPassword:g,v:u,show:v,themeStore:w,copy:c=>{navigator.clipboard.writeText(c).then(()=>{$({title:a("successForm.success"),body:a("successForm.copy")})})},validate:({prop:c})=>{const k=u.value.$errors.find(V=>V.$property===c);return k&&k.$message},onSubmit:async()=>{if(u.value.$touch(),!e.pending&&await u.value.$validate()){e.pending=!0;try{setTimeout(()=>{$({title:a("successForm.success"),body:a("successForm.changePassword")}),e.pending=!1,v.value=!1},1500)}catch(c){console.log(c)}finally{}}}}},components:{Sheet:A}}),q=e=>(_("data-v-c9fa7dbc"),e=e(),j(),e),G={class:"mt-8"},H={class:"flex flex-col"},J={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},K={class:"mt-6 flex flex-col"},O={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},Q={class:"mt-1 text-right"},R={class:"mt-6 flex flex-col"},W={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},X={class:"mt-1 text-right"},Y={class:"relative mt-6 flex flex-col"},Z={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},ee={class:"mt-1 text-right"},se={class:"p-5 pt-4 md:p-8"},te=q(()=>t("i",{style:{"font-size":"1rem"},class:"pi pi-times text-gray-500 dark:text-gray-300"},null,-1)),oe=[te],re={class:"mt-2"},le={class:"text-2xl font-bold"},ae={class:"mt-1 leading-5"},ie={class:"relative mt-6 flex flex-col"},ne={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},de={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},pe={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},me={key:0,class:"invalid mt-1 text-red-400"},ue={class:"relative mt-6 flex flex-col"},ce={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},fe={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},ve={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},ye={key:0,class:"invalid mt-1 text-red-400"};function ge(e,s,g,v,b,w){const i=f("InputIcon"),a=f("InputText"),n=f("IconField"),u=f("Button"),h=f("Sheet");return d(),p(L,null,[t("div",G,[t("div",H,[t("label",J,l(e.$t("form.labelEmail")),1),o(n,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-envelope"}),o(a,{modelValue:e.user.email,"onUpdate:modelValue":s[0]||(s[0]=r=>e.user.email=r),modelModifiers:{trim:!0},disabled:"",type:"text",size:"large"},null,8,["modelValue"])]),_:1})]),t("div",K,[t("label",O,l(e.$t("form.referralPromocode")),1),o(n,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-verified"}),o(a,{modelValue:e.user.promo,"onUpdate:modelValue":s[1]||(s[1]=r=>e.user.promo=r),modelModifiers:{trim:!0},disabled:"",type:"text",size:"large"},null,8,["modelValue"])]),_:1})]),t("div",Q,[t("div",{onClick:s[2]||(s[2]=r=>e.copy(e.user.promo)),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},l(e.$t("form.copy")),1)]),t("div",R,[t("label",W,l(e.$t("form.referralLink")),1),o(n,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-verified"}),o(a,{value:`https://cab.opes.team/?ref=${e.user.promo}`,disabled:"",type:"text",size:"large"},null,8,["value"])]),_:1})]),t("div",X,[t("div",{onClick:s[3]||(s[3]=r=>e.copy(`https://cab.opes.team/?ref=${e.user.promo}`)),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500"},l(e.$t("form.copy")),1)]),t("div",Y,[t("label",Z,l(e.$t("form.labelPassword")),1),o(n,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-lock"}),o(a,{value:123456,disabled:"",type:"password",size:"large"})]),_:1})]),t("div",ee,[t("div",{onClick:s[4]||(s[4]=r=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},l(e.$t("form.change")),1)])]),o(h,{visible:e.show,"onUpdate:visible":s[13]||(s[13]=r=>e.show=r),class:x(["bg-white md:bg-surface-100 dark:bg-dark dark:text-white",{dark:e.themeStore.theme==="dark"}])},{default:m(()=>[t("div",se,[t("div",{onClick:s[5]||(s[5]=r=>e.show=!1),class:"flex cursor-pointer justify-end"},oe),t("div",re,[t("span",le,l(e.$t("form.changePassword")),1)]),t("div",ae,l(e.$t("form.changePasswordDescription")),1),t("div",ie,[t("label",ne,l(e.$t("form.currentPassword")),1),o(n,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-lock"}),o(a,{modelValue:e.form.password,"onUpdate:modelValue":s[6]||(s[6]=r=>e.form.password=r),modelModifiers:{trim:!0},onFocus:s[7]||(s[7]=r=>e.v.$reset()),invalid:!!e.validate({prop:"password"}),type:e.typePassword?"password":"text",size:"large"},null,8,["modelValue","invalid","type"])]),_:1}),t("button",{class:"toggle p-2",type:"button",onClick:s[8]||(s[8]=r=>e.typePassword=!e.typePassword)},[e.typePassword?(d(),p("i",de)):(d(),p("i",pe))]),e.validate({prop:"password"})?(d(),p("div",me,l(e.validate({prop:"password"})),1)):P("",!0)]),t("div",ue,[t("label",ce,l(e.$t("newPassword.title")),1),o(n,{iconPosition:"left"},{default:m(()=>[o(i,{class:"pi pi-lock"}),o(a,{modelValue:e.form.currentPassword,"onUpdate:modelValue":s[9]||(s[9]=r=>e.form.currentPassword=r),modelModifiers:{trim:!0},onFocus:s[10]||(s[10]=r=>e.v.$reset()),invalid:!!e.validate({prop:"currentPassword"}),type:e.typeCurrentPassword?"password":"text",size:"large"},null,8,["modelValue","invalid","type"])]),_:1}),t("button",{class:"toggle p-2",type:"button",onClick:s[11]||(s[11]=r=>e.typeCurrentPassword=!e.typeCurrentPassword)},[e.typeCurrentPassword?(d(),p("i",fe)):(d(),p("i",ve))]),e.validate({prop:"currentPassword"})?(d(),p("div",ye,l(e.validate({prop:"currentPassword"})),1)):P("",!0)]),o(u,{onClick:e.onSubmit,class:x([{"-loading":e.form.pending},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pending,label:e.form.pending?"":e.$t("form.save"),rounded:""},null,8,["onClick","class","loading","label"]),t("div",{onClick:s[12]||(s[12]=r=>e.show=!1),class:"mt-6 cursor-pointer text-center font-semibold text-blue-600 dark:text-blue-500"},l(e.$t("form.cancel")),1)])]),_:1},8,["visible","class"])],64)}const xe=z(N,[["render",ge],["__scopeId","data-v-c9fa7dbc"]]);export{xe as default};
