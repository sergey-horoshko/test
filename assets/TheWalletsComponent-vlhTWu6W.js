import{u as F}from"./me-BFpF1b53.js";import{s as T,a as U}from"./request-DpTcvMri.js";import{b as j,d as D,k as N,j as y,y as W,v as L,l as I,o as R,E as q,r as c,c as i,e as u,g as o,t as d,f as l,w as g,n as f,F as M,p as $,A,B as G}from"./index-CDtww2dw.js";import{r as H,m as J}from"./i18n-validators-Dl5lyeYw.js";import{u as K}from"./index-Bseo6DBn.js";function O(e){return T({url:"/wallets",method:"post",data:e})}const Q=D({setup(){const e=N({password:null,wallets:[{network:"TRC20",address:null},{network:"BEP20",address:null},{network:"ERC20",address:null}],pending:null,pendingModal:null}),s=y(!0),w=y(!1),C=y(!0),h=y(!1),V=F(),p=W(),{user:r}=V,{t:m}=L(),b=I(()=>!e.wallets.some(a=>{var n;return a.address&&((n=a.address)==null?void 0:n.length)>15})),k=I(()=>({password:{required:H,minLength:J(6)}})),t=K(k,e),P=async()=>{if(t.value.$touch(),!e.pendingModal&&await t.value.$validate()){e.pendingModal=!0;try{setTimeout(()=>{e.pendingModal=!1,h.value=!1,s.value=!0,w.value=!0},1500)}catch(a){console.log(a)}finally{}}},x=async()=>{if(e.pending)return;e.pending=!0;const a={wallets:e.wallets};try{const{wallets:n}=await O(a);r.wallets.forEach(v=>{n.forEach(S=>{v.network===S.network&&(v.address=S.address)})}),r.wallets=n,s.value=!1,U({title:m("successForm.success"),body:m("successForm.changePassword")})}catch(n){console.log(n)}finally{e.pending=!1}},E=()=>{s.value=!1,w.value=!1},z=({prop:a})=>{const n=t.value.$errors.find(v=>v.$property===a);return n&&n.$message},B=()=>{s.value=!r.wallets.some(a=>!!a.address)};return R(()=>{e.wallets.forEach(a=>{r.wallets.forEach(n=>{a.network===n.network&&(a.address=n.address)})}),B()}),{form:e,user:r,typePassword:C,themeStore:p,v:t,show:h,edit:s,isValid:b,showCancel:w,validate:z,onSubmit:P,onChange:x,changeVisibility:E}},components:{Sheet:q}}),X=e=>(A("data-v-b528fd37"),e=e(),G(),e),Y={class:"mt-8"},Z={class:"mt-6 flex flex-col"},_={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},ee={class:"mt-1 text-right"},se={class:"mt-6 flex flex-col"},te={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},oe={key:0,class:"mt-1 text-right"},le={class:"relative mt-6 flex flex-col"},ae={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},ne={class:"mt-1 text-right"},de={class:"p-5 pt-4 md:p-8"},re=X(()=>o("i",{style:{"font-size":"1rem"},class:"pi pi-times text-gray-500 dark:text-gray-300"},null,-1)),ie=[re],ue={class:"mt-2"},me={class:"text-2xl font-bold"},pe={class:"mt-1 leading-5"},fe={class:"relative mt-6 flex flex-col"},ce={class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-300"},ge={key:0,class:"pi pi-eye",style:{"font-size":"1.1rem"}},we={key:1,class:"pi pi-eye-slash",style:{"font-size":"1.1rem"}},be={key:0,class:"invalid mt-1 text-red-400"};function ve(e,s,w,C,h,V){const p=c("InputIcon"),r=c("InputText"),m=c("IconField"),b=c("Button"),k=c("Sheet");return i(),u(M,null,[o("div",Y,[o("div",Z,[o("label",_,d(e.$t("form.trc20")),1),l(m,{iconPosition:"left"},{default:g(()=>[l(p,{class:"pi pi-wallet"}),l(r,{modelValue:e.form.wallets[0].address,"onUpdate:modelValue":s[0]||(s[0]=t=>e.form.wallets[0].address=t),modelModifiers:{trim:!0},disabled:!e.edit,type:"text",size:"large"},null,8,["modelValue","disabled"])]),_:1})]),o("div",ee,[e.edit?f("",!0):(i(),u("div",{key:0,onClick:s[1]||(s[1]=t=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},d(e.$t("form.change")),1))]),o("div",se,[o("label",te,d(e.$t("form.bep20")),1),l(m,{iconPosition:"left"},{default:g(()=>[l(p,{class:"pi pi-wallet"}),l(r,{modelValue:e.form.wallets[1].address,"onUpdate:modelValue":s[2]||(s[2]=t=>e.form.wallets[1].address=t),modelModifiers:{trim:!0},disabled:!e.edit,type:"text",size:"large"},null,8,["modelValue","disabled"])]),_:1})]),e.edit?f("",!0):(i(),u("div",oe,[o("div",{onClick:s[3]||(s[3]=t=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},d(e.$t("form.change")),1)])),o("div",le,[o("label",ae,d(e.$t("form.erc20")),1),l(m,{iconPosition:"left"},{default:g(()=>[l(p,{class:"pi pi-wallet"}),l(r,{modelValue:e.form.wallets[2].address,"onUpdate:modelValue":s[4]||(s[4]=t=>e.form.wallets[2].address=t),modelModifiers:{trim:!0},disabled:!e.edit,type:"text",size:"large"},null,8,["modelValue","disabled"])]),_:1})]),o("div",ne,[e.edit?f("",!0):(i(),u("div",{key:0,onClick:s[5]||(s[5]=t=>e.show=!0),class:"cursor-pointer text-xs font-medium text-blue-600 dark:text-blue-500",to:"/reset"},d(e.$t("form.change")),1))]),e.edit?(i(),u(M,{key:1},[l(b,{onClick:e.onChange,disabled:e.isValid,class:$([{"-loading":e.form.pending},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pending,label:e.form.pending?"":e.$t("form.save"),rounded:""},null,8,["onClick","disabled","class","loading","label"]),e.showCancel?(i(),u("button",{key:0,onClick:s[6]||(s[6]=(...t)=>e.changeVisibility&&e.changeVisibility(...t)),class:"mx-auto mt-6 block cursor-pointer font-semibold text-blue-600 dark:text-blue-500"},d(e.$t("form.cancel")),1)):f("",!0)],64)):f("",!0)]),l(k,{visible:e.show,"onUpdate:visible":s[12]||(s[12]=t=>e.show=t),class:$(["bg-white md:bg-surface-100 dark:bg-dark dark:text-white",{dark:e.themeStore.theme==="dark"}])},{default:g(()=>[o("div",de,[o("div",{onClick:s[7]||(s[7]=t=>e.show=!1),class:"flex cursor-pointer justify-end"},ie),o("div",ue,[o("span",me,d(e.$t("form.changeWallet")),1)]),o("div",pe,d(e.$t("form.changePasswordDescription")),1),o("div",fe,[o("label",ce,d(e.$t("form.currentPassword")),1),l(m,{iconPosition:"left"},{default:g(()=>[l(p,{class:"pi pi-lock"}),l(r,{modelValue:e.form.password,"onUpdate:modelValue":s[8]||(s[8]=t=>e.form.password=t),modelModifiers:{trim:!0},onFocus:s[9]||(s[9]=t=>e.v.$reset()),invalid:!!e.validate({prop:"password"}),type:e.typePassword?"password":"text",size:"large"},null,8,["modelValue","invalid","type"])]),_:1}),o("button",{class:"toggle p-2",type:"button",onClick:s[10]||(s[10]=t=>e.typePassword=!e.typePassword)},[e.typePassword?(i(),u("i",ge)):(i(),u("i",we))]),e.validate({prop:"password"})?(i(),u("div",be,d(e.validate({prop:"password"})),1)):f("",!0)]),l(b,{onClick:e.onSubmit,class:$([{"-loading":e.form.pendingModal},"justify-content-center mt-6 flex w-full bg-blue-600 p-4 text-center text-white"]),loading:e.form.pendingModal,label:e.form.pendingModal?"":e.$t("form.save"),rounded:""},null,8,["onClick","class","loading","label"]),o("div",{onClick:s[11]||(s[11]=t=>e.show=!1),class:"mt-6 cursor-pointer text-center font-semibold text-blue-600 dark:text-blue-500"},d(e.$t("form.cancel")),1)])]),_:1},8,["visible","class"])],64)}const Ve=j(Q,[["render",ve],["__scopeId","data-v-b528fd37"]]);export{Ve as default};
